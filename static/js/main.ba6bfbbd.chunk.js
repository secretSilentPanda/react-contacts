(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{66:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(57),c=a.n(r),s=(a(66),a(12)),i=a(0),o=a.n(i),l=a(1),u=a(34),d=a(44),j=a(76),b=a(8);function m(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),i=Object(s.a)(c,2),m=i[0],p=i[1],x=Object(n.useState)(!1),h=Object(s.a)(x,2),O=h[0],f=h[1];function v(){return(v=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),f(!1),e.prev=2,e.next=5,Object(u.c)(Object(u.b)(),a,m);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),f(e.t0.message.substring(10));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(b.jsx)(j.a.div,{initial:{translateY:-20,opacity:0},animate:{translateY:0,opacity:1},children:Object(b.jsxs)("form",{onSubmit:function(e){return v.apply(this,arguments)},className:"flex flex-col max-w-md px-4 py-4 mx-auto mt-16 space-y-2 border rounded-md shadow-lg",children:[Object(b.jsx)("h1",{className:"pl-1 mb-4 text-2xl",children:"Login"}),Object(b.jsx)("input",{value:a,onChange:function(e){return r(e.target.value)},className:"px-2 py-1 border rounded-md",type:"text",placeholder:"Email"}),Object(b.jsx)("input",{value:m,onChange:function(e){return p(e.target.value)},className:"px-2 py-1 border rounded-md",type:"password",placeholder:"Password"}),Object(b.jsx)("button",{className:"py-1 text-white bg-blue-500 rounded-md",children:"Login"}),Object(b.jsx)(d.b,{className:"text-center text-blue-500 underline",to:"/signup",children:"Signup"}),O&&Object(b.jsx)("span",{className:"py-1 my-2 text-center bg-red-200 border rounded-sm",children:O})]})})}function p(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),i=Object(s.a)(c,2),m=i[0],p=i[1],x=Object(n.useState)(""),h=Object(s.a)(x,2),O=h[0],f=h[1],v=Object(n.useState)(!1),g=Object(s.a)(v,2),N=g[0],w=g[1];function y(){return(y=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),w(!1),!(a&&m&&O)){e.next=14;break}return n=Object(u.b)(),e.prev=4,e.next=7,Object(u.a)(n,m,O);case 7:return e.next=9,Object(u.e)(n.currentUser,{displayName:a});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),w(e.t0.message.substring(10));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}return Object(b.jsx)(j.a.div,{initial:{translateY:-20,opacity:0},animate:{translateY:0,opacity:1},layoutId:"box",children:Object(b.jsxs)("form",{onSubmit:function(e){return y.apply(this,arguments)},className:"flex flex-col max-w-md px-4 py-4 mx-auto mt-16 space-y-2 border rounded-md shadow-lg",children:[Object(b.jsx)("h1",{className:"pl-1 mb-4 text-2xl",children:"Signup"}),Object(b.jsx)("input",{value:a,required:!0,onChange:function(e){return r(e.target.value)},className:"px-2 py-1 border rounded-md",type:"text",placeholder:"Name"}),Object(b.jsx)("input",{required:!0,value:m,onChange:function(e){return p(e.target.value)},className:"px-2 py-1 border rounded-md",type:"text",placeholder:"Email"}),Object(b.jsx)("input",{required:!0,value:O,onChange:function(e){return f(e.target.value)},className:"px-2 py-1 border rounded-md",type:"password",placeholder:"Password"}),Object(b.jsx)("button",{className:"py-1 text-white bg-blue-500 rounded-md",children:"Signup"}),Object(b.jsx)(d.b,{className:"text-center text-blue-500 underline",to:"/login",children:"Login"}),N&&Object(b.jsx)("span",{className:"py-1 my-2 text-center bg-red-200 border rounded-sm",children:N})]})})}var x=a(14),h=a(4),O=a(18),f=a(26),v=a(77),g=a(60),N=a(61),w=Object(g.a)({apiKey:"AIzaSyC-_nHZGUMOyMLwSwZIBKypP5lGxSFDYwk",authDomain:"react-android-6523e.firebaseapp.com",projectId:"react-android-6523e",storageBucket:"react-android-6523e.appspot.com",messagingSenderId:"269425320012",appId:"1:269425320012:web:921737c61e8abd190854e9"}),y=Object(N.a)(w),k={email:"",firstName:"",lastName:"",phoneNUmber:"",editMode:!1};function C(e){var t=e.user,a=Object(n.useState)(!1),r=Object(s.a)(a,2),c=r[0],i=r[1],u=Object(n.useState)(k),d=Object(s.a)(u,2),m=d[0],p=d[1];function x(){return(x=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,e.t0=null===t||void 0===t?void 0:t.email,!e.t0){e.next=7;break}return e.next=6,Object(f.f)(Object(f.c)(y,"contacts/users",t.email,m.email),m);case 6:n=e.sent;case 7:setTimeout((function(){p(k)}),0),console.log("res",n),e.next=14;break;case 11:e.prev=11,e.t1=e.catch(1),console.log("error.message",e.t1.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return Object(b.jsxs)("form",{onSubmit:function(e){return x.apply(this,arguments)},className:"flex flex-col max-w-screen-lg mx-auto pt-2 px-2 top-0 ".concat(c&&"border rounded-md p-2 shadow-sm pb-4 mb-14"," "),children:[Object(b.jsx)("svg",{onClick:function(){return i((function(e){return!e}))},xmlns:"http://www.w3.org/2000/svg",className:"transform duration-300 text-gray-500 mb-2 ".concat(c?"rotate-45 text-red-500 w-6 h-6":"w-10 h-10"," cursor-pointer"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Object(b.jsx)(v.a,{children:c&&Object(b.jsxs)(j.a.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"flex flex-col space-y-3 overflow-hidden",children:[Object(b.jsxs)("div",{className:"flex space-x-2",children:[Object(b.jsx)("input",{required:!0,className:"w-full px-2 py-1 border rounded-md",value:m.firstName,name:"firstName",autoComplete:"off",onChange:function(e){return p(Object(O.a)(Object(O.a)({},m),{},Object(h.a)({},e.target.name,e.target.value)))},type:"text",placeholder:"First name"}),Object(b.jsx)("input",{required:!0,className:"w-full px-2 py-1 border rounded-md",value:m.lastName,name:"lastName",autoComplete:"off",onChange:function(e){return p(Object(O.a)(Object(O.a)({},m),{},Object(h.a)({},e.target.name,e.target.value)))},type:"text",placeholder:"Last name"})]}),Object(b.jsxs)("div",{className:"flex space-x-2",children:[Object(b.jsx)("input",{required:!0,value:m.email,name:"email",onChange:function(e){return p(Object(O.a)(Object(O.a)({},m),{},Object(h.a)({},e.target.name,e.target.value)))},className:"w-full px-2 py-1 border rounded-md",type:"text",placeholder:"Email"}),Object(b.jsx)("input",{value:m.phoneNumber,name:"phoneNumber",onChange:function(e){return p(Object(O.a)(Object(O.a)({},m),{},Object(h.a)({},e.target.name,e.target.value)))},className:"w-full px-2 py-1 border rounded-md",type:"number",placeholder:"Phone"})]}),Object(b.jsx)("button",{className:"py-1 text-white bg-blue-500 rounded-md",children:"ADD"})]})})]})}var S=a(23);function L(e){var t=e.contact,a=e.setContacts,r=e.user;console.log("contact",t);var c=Object(n.useState)({firstName:"",lastName:"",phoneNumber:"",email:""}),i=Object(s.a)(c,2),u=i[0],d=i[1];function j(){return(j=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)(Object(f.c)(y,"contacts/users",r.email,t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return m=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.f)(Object(f.c)(y,"contacts/users",r.email,u.email),u);case 2:a((function(e){return e.map((function(e){return e.email===u.email?u:e}))})),a((function(e){return e.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{editMode:!1})}))}));case 4:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}return Object(b.jsxs)("div",{className:"relative flex flex-col py-3 pl-6 m-2 space-y-1 duration-100 border rounded-md shadow-sm hover:shadow-md group",children:[Object(b.jsxs)("div",{className:"absolute flex space-x-2 duration-100 opacity-0 right-1 top-2 group-hover:opacity-100",children:[t.editMode?Object(b.jsx)("div",{onClick:function(){return m.apply(this,arguments)},className:"cursor-pointer FINISH_EDITING_BUTTON",children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}):Object(b.jsx)("div",{onClick:function(){return d(e=t),void a((function(t){return t.map((function(t){return t.email===e.email?Object(O.a)(Object(O.a)({},t),{},{editMode:!0}):Object(O.a)(Object(O.a)({},t),{},{editMode:!1})}))}));var e},className:"cursor-pointer EDIT_BUTTON",children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),Object(b.jsx)("div",{className:"text-red-500 cursor-pointer",onClick:function(){return function(e){return j.apply(this,arguments)}(t.email)},children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"my-2 space-y-2",children:[Object(b.jsx)("div",{children:t.editMode?Object(b.jsxs)("div",{className:"flex items-center",children:[Object(b.jsx)("span",{className:"whitespace-nowrap",children:" First Name:\xa0"}),Object(b.jsx)("input",{autoComplete:"off",className:"px-2 text-lg bg-transparent rounded-sm bg-yellow-50",value:u.firstName,name:"firstName",onChange:function(e){return d(Object(O.a)(Object(O.a)({},u),{},{firstName:e.target.value}))}})]}):Object(b.jsxs)("div",{className:"flex items-center",children:[Object(b.jsx)("span",{children:" First Name:\xa0"}),Object(b.jsx)("div",{className:"px-2 text-lg bg-transparent",children:t.firstName})]})}),Object(b.jsx)("div",{children:t.editMode?Object(b.jsxs)("div",{className:"flex items-center",children:[Object(b.jsx)("span",{className:"whitespace-nowrap",children:" Last Name:\xa0"}),Object(b.jsx)("input",{autoComplete:"off",className:"px-2 text-lg bg-transparent rounded-sm w-min bg-yellow-50",value:u.lastName,name:"lastName",onChange:function(e){return d(Object(O.a)(Object(O.a)({},u),{},{lastName:e.target.value}))}})]}):Object(b.jsxs)("div",{className:"flex items-center",children:[Object(b.jsx)("span",{children:" Last Name:\xa0"}),Object(b.jsx)("div",{className:"px-2 text-lg bg-transparent w-min",children:t.lastName})]})})]}),Object(b.jsxs)("div",{className:"break-words",children:["Email:\xa0",Object(b.jsx)("span",{className:"text-blue-500 underline cursor-pointer",children:t.email})]}),Object(b.jsxs)("div",{className:"my-2",children:["Phone number: ",t.phoneNumber]})]})]})}function M(e){var t=e.user,a=Object(n.useState)([]),r=Object(s.a)(a,2),c=r[0],i=r[1];return Object(n.useEffect)((function(){if(null===t||void 0===t?void 0:t.email){var e=Object(f.a)(y,"contacts/users",null===t||void 0===t?void 0:t.email);Object(f.e)(e,(function(e){e.docChanges().forEach((function(e){"added"===e.type&&i((function(t){return[].concat(Object(S.a)(t),[e.doc.data()])})),"removed"===e.type&&i((function(t){return t.filter((function(t){return(null===t||void 0===t?void 0:t.email)!==e.doc.data().email}))}))}))}))}}),[null===t||void 0===t?void 0:t.email]),Object(b.jsxs)("div",{className:"-mt-12",children:[Object(b.jsx)("h1",{className:"my-3 text-xl font-bold text-center text-blue-500",children:"Contacts"}),Object(b.jsx)("div",{style:{gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))"},className:"grid max-w-screen-lg mx-auto",children:Object(b.jsx)(v.a,{children:null===c||void 0===c?void 0:c.map((function(e){return Object(b.jsx)(j.a.div,{initial:{scale:0},animate:{scale:1},exit:{scale:.8,opacity:0},layout:!0,children:Object(b.jsx)(L,{user:t,contact:e,setContacts:i})},e.email)}))})})]})}function I(){var e=Object(u.b)().currentUser.displayName;return Object(b.jsx)("nav",{className:"w-full py-2 mb-6 duration-100 bg-blue-600 shadow-md",children:Object(b.jsxs)("div",{className:"flex justify-between max-w-screen-lg px-10 mx-auto text-white ",children:[Object(b.jsxs)("h1",{className:"text-xl font-bold shadow-sm",children:[e&&e+"'s"," Contacts"]}),Object(b.jsx)("button",{onClick:function(){Object(u.d)(Object(u.b)())},className:"px-2 transform border-2 border-white rounded-sm cursor-pointer active:scale-90",children:"Logout"})]})})}function E(e){var t=e.user;return Object(b.jsxs)(j.a.div,{initial:{translateY:-30,opacity:0,height:0},animate:{translateY:0,opacity:1,height:"auto"},className:"overflow-hidden",children:[Object(b.jsx)(I,{user:t}),Object(b.jsxs)("div",{className:"mx-4",children:[Object(b.jsx)(C,{user:t}),Object(b.jsx)(M,{user:t})]})]})}var B=a(46);var D=function(){var e=Object(n.useState)(),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){Object(B.c)(Object(B.b)(),(function(e){r(e)}))}),[]),Object(b.jsx)(d.a,{basename:"/react-contacts",children:Object(b.jsxs)(x.d,{children:[Object(b.jsx)(x.b,{path:"/login",children:a?Object(b.jsx)(x.a,{to:"/"}):Object(b.jsx)(m,{})}),Object(b.jsx)(x.b,{path:"/signup",children:a?Object(b.jsx)(x.a,{to:"/"}):Object(b.jsx)(p,{})}),Object(b.jsx)(x.b,{exact:!0,path:"/",children:a?Object(b.jsx)(E,{user:a}):Object(b.jsx)(x.a,{to:"/login"})})]})})};c.a.render(Object(b.jsx)(D,{}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.ba6bfbbd.chunk.js.map