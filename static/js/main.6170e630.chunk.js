(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{69:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(4),c=a(60),r=a.n(c),s=(a(69),a(12)),i=a(0),o=a.n(i),l=a(1),u=a(34),d=a(44),j=a(79),b=a(52),m=a(8);function p(){var e,t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],r=a[1];c&&(e="s"===c[c.length-1].toLowerCase()?"'":"'s");return Object(b.useEffect)((function(){setTimeout((function(){console.log("SETTING USER");var e=Object(u.b)().currentUser;e&&r(e.displayName)}),1e3)}),[]),Object(m.jsx)("nav",{className:"w-full py-2 mb-6 duration-100 bg-blue-600 shadow-md",children:Object(m.jsxs)("div",{className:"flex justify-between max-w-screen-lg px-10 mx-auto text-white ",children:[Object(m.jsxs)("h1",{className:"text-xl font-bold shadow-sm",children:[c&&"".concat(c).concat(e," "),"Contacts"]}),c&&Object(m.jsx)("button",{onClick:function(){Object(u.d)(Object(u.b)())},className:"px-2 transform border-2 border-white rounded-sm cursor-pointer active:scale-90",children:"Logout"})]})})}function x(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),i=Object(s.a)(r,2),b=i[0],x=i[1],h=Object(n.useState)(!1),O=Object(s.a)(h,2),f=O[0],v=O[1];function g(){return(g=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),v(!1),e.prev=2,e.next=5,Object(u.c)(Object(u.b)(),a,b);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),v(e.t0.message.substring(10));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{}),Object(m.jsx)(j.a.div,{initial:{translateY:-20,opacity:0},animate:{translateY:0,opacity:1},children:Object(m.jsxs)("form",{onSubmit:function(e){return g.apply(this,arguments)},className:"flex flex-col max-w-md px-4 py-4 mx-auto mt-16 space-y-2 border rounded-md shadow-lg",children:[Object(m.jsx)("h1",{className:"pl-1 mb-4 text-2xl",children:"Login"}),Object(m.jsx)("input",{value:a,onChange:function(e){return c(e.target.value)},className:"px-2 py-1 border rounded-md",type:"text",placeholder:"Email"}),Object(m.jsx)("input",{value:b,onChange:function(e){return x(e.target.value)},className:"px-2 py-1 border rounded-md",type:"password",placeholder:"Password"}),Object(m.jsx)("button",{className:"py-1 text-white bg-blue-500 rounded-md",children:"Login"}),Object(m.jsx)(d.b,{className:"text-center text-blue-500 underline",to:"/signup",children:"Signup"}),f&&Object(m.jsx)("span",{className:"py-1 my-2 text-center bg-red-200 border rounded-sm",children:f})]})})]})}function h(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),i=Object(s.a)(r,2),b=i[0],x=i[1],h=Object(n.useState)(""),O=Object(s.a)(h,2),f=O[0],v=O[1],g=Object(n.useState)(!1),w=Object(s.a)(g,2),N=w[0],y=w[1];function k(){return(k=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),y(!1),!(a&&b&&f)){e.next=14;break}return n=Object(u.b)(),e.prev=4,e.next=7,Object(u.a)(n,b,f);case 7:return e.next=9,Object(u.e)(n.currentUser,{displayName:a});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),y(e.t0.message.substring(10));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{}),Object(m.jsx)(j.a.div,{initial:{translateY:-20,opacity:0},animate:{translateY:0,opacity:1},layoutId:"box",children:Object(m.jsxs)("form",{onSubmit:function(e){return k.apply(this,arguments)},className:"flex flex-col max-w-md px-4 py-4 mx-auto mt-16 space-y-2 border rounded-md shadow-lg",children:[Object(m.jsx)("h1",{className:"pl-1 mb-4 text-2xl",children:"Signup"}),Object(m.jsx)("input",{value:a,required:!0,onChange:function(e){return c(e.target.value)},className:"px-2 py-1 border rounded-md",type:"text",placeholder:"Name"}),Object(m.jsx)("input",{required:!0,value:b,onChange:function(e){return x(e.target.value)},className:"px-2 py-1 border rounded-md",type:"text",placeholder:"Email"}),Object(m.jsx)("input",{required:!0,value:f,onChange:function(e){return v(e.target.value)},className:"px-2 py-1 border rounded-md",type:"password",placeholder:"Password"}),Object(m.jsx)("button",{className:"py-1 text-white bg-blue-500 rounded-md",children:"Signup"}),Object(m.jsx)(d.b,{className:"text-center text-blue-500 underline",to:"/login",children:"Login"}),N&&Object(m.jsx)("span",{className:"py-1 my-2 text-center bg-red-200 border rounded-sm",children:N})]})})]})}var O=a(15),f=a(5),v=a(23),g=a(26),w=a(80),N=a(63),y=a(64),k=Object(N.a)({apiKey:"AIzaSyC-_nHZGUMOyMLwSwZIBKypP5lGxSFDYwk",authDomain:"react-android-6523e.firebaseapp.com",projectId:"react-android-6523e",storageBucket:"react-android-6523e.appspot.com",messagingSenderId:"269425320012",appId:"1:269425320012:web:921737c61e8abd190854e9"}),C=Object(y.a)(k),S=a(48);function L(e,t,a){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(o.a.mark((function e(t,a,n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.style.height="4px",c=new Promise((function(e,c){var r=Object(S.b)(),s=Object(S.c)(r,"userImages"+a),i=Object(S.d)(s,t);i.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;n.style.width=t+"%"}),(function(e){console.log("error",e),c(e)}),Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.style.height="0px",setTimeout((function(){n.style.width="0px"}),100),t.next=4,Object(S.a)(i.snapshot.ref);case 4:a=t.sent,e(a);case 6:case"end":return t.stop()}}),t)}))))})),e.abrupt("return",c);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){var t=e.avatarRef,a=e.userImage,n=e.setInputBg;return Object(m.jsxs)("label",{tabIndex:"0",ref:t,style:{backgroundImage:"url(no_avatar.jpg)"},htmlFor:"image",className:"input_file_label",children:[!a&&Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-16 h-16 mt-24 opacity-30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Object(m.jsx)("input",{className:"hidden",id:"image",type:"file",accept:"image/*",onChange:n})]})}var E={email:"",firstName:"",lastName:"",phoneNUmber:"",imageURL:""};function R(e){var t=e.user,a=Object(n.useState)(!1),c=Object(s.a)(a,2),r=c[0],i=c[1],u=Object(n.useState)(E),d=Object(s.a)(u,2),b=d[0],p=d[1],x=Object(n.useState)(""),h=Object(s.a)(x,2),O=h[0],N=h[1],y=Object(n.useState)(""),k=Object(s.a)(y,2),S=k[0],I=k[1],R=Object(n.useRef)(),B=Object(n.useRef)(),_=Object(n.useRef)();function U(){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null===t||void 0===t?void 0:t.email,!e.t0){e.next=4;break}return e.next=4,Object(g.f)(Object(g.c)(C,"contacts/users",t.email,b.email),Object(v.a)(Object(v.a)({},b),{},{imageURL:S}));case 4:p(E),N(""),null===R||void 0===R||null===(a=R.current)||void 0===a||a.focus();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!O){e.next=8;break}return e.next=4,L(O,b.email,B.current);case 4:a=e.sent,I(a),e.next=9;break;case 8:U();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){p(Object(v.a)(Object(v.a)({},b),{},Object(f.a)({},e.target.name,e.target.value)))}return Object(n.useEffect)((function(){S&&U()}),[S]),Object(n.useEffect)((function(){_.current&&(_.current.style.backgroundImage=O?"url(".concat(URL.createObjectURL(O),")"):"url(no_avatar.jpg)")}),[O]),Object(m.jsxs)("form",{onSubmit:function(e){return D.apply(this,arguments)},className:"flex flex-col max-w-screen-lg mx-auto pt-2 px-2 top-0 ".concat(r&&"border rounded-md p-2 shadow-sm pb-4 mb-14"," "),children:[Object(m.jsx)("svg",{onClick:function(){i((function(e){return!e})),setTimeout((function(){var e;!r&&(null===R||void 0===R||null===(e=R.current)||void 0===e||e.focus())}),0)},xmlns:"http://www.w3.org/2000/svg",className:"transform duration-300 text-gray-500 mb-2 ".concat(r?"rotate-45 text-red-500 w-6 h-6":"w-10 h-10"," cursor-pointer"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Object(m.jsx)(w.a,{children:r&&Object(m.jsxs)(j.a.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:[Object(m.jsxs)("div",{className:"flex justify-between mr-4 space-x-4",children:[Object(m.jsxs)("div",{className:"mr-2",children:[Object(m.jsx)("input",{required:!0,ref:R,className:"form_input",value:b.firstName,name:"firstName",autoComplete:"off",onChange:T,type:"text",placeholder:"First name"}),Object(m.jsx)("input",{required:!0,className:"form_input",value:b.lastName,name:"lastName",autoComplete:"off",onChange:T,type:"text",placeholder:"Last name"}),Object(m.jsx)("input",{required:!0,value:b.email,name:"email",onChange:T,className:"form_input",type:"text",placeholder:"Email"}),Object(m.jsx)("input",{value:parseInt(b.phoneNumber),name:"phoneNumber",onChange:T,className:"form_input",type:"number",placeholder:"Phone"})]}),Object(m.jsx)("div",{className:"flex w-32 mb-3",children:Object(m.jsx)(M,{avatarRef:_,userImage:O,setInputBg:function(e){N(e.target.files[0])}})})]}),Object(m.jsx)("button",{className:"w-full py-1 my-3 text-white bg-blue-500 rounded-md",children:"ADD"}),Object(m.jsx)("div",{ref:B,className:"w-0 h-1 duration-300 bg-green-500 rounded-md"})]})})]})}var B=a(19),_=a(58);function U(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 bg-white rounded-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})}function F(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}function D(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}var T=["editMode"],Y=["editMode"];function q(e){var t=e.contact,a=e.setContacts,c=e.user,r=Object(n.useState)({firstName:"",lastName:"",phoneNumber:"",email:""}),i=Object(s.a)(r,2),u=i[0],d=i[1],j=Object(b.useRef)();function p(){return(p=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.b)(Object(g.c)(C,"contacts/users",c.email,t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return x=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.editMode,t=Object(_.a)(u,T),e.next=3,Object(g.f)(Object(g.c)(C,"contacts/users",c.email,u.email),t);case 3:a((function(e){u.editMode;var t=Object(_.a)(u,Y);return e.map((function(e){return e.email===u.email?t:e}))})),a((function(e){return e.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{editMode:!1})}))}));case 5:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function h(e,t){d(Object(v.a)(Object(v.a)({},u),{},Object(f.a)({},t,e.target.value)))}return Object(m.jsxs)("div",{className:"relative flex flex-wrap justify-between px-2 py-3 m-2 space-y-1 duration-100 border rounded-md shadow-sm bg-green-50 hover:shadow-md group",children:[Object(m.jsxs)("div",{className:"mx-3 bg-redd-100",children:[Object(m.jsxs)("div",{className:"absolute flex space-x-2 duration-200 opacity-0 right-1 top-2 group-hover:opacity-100",children:[t.editMode?Object(m.jsx)("div",{onClick:function(){return x.apply(this,arguments)},className:"bg-white rounded-full ",children:Object(m.jsx)(D,{})}):Object(m.jsx)("div",{onClick:function(){return function(e,t,a){t(e),a((function(t){return t.map((function(t){return t.email===e.email?Object(v.a)(Object(v.a)({},t),{},{editMode:!0}):Object(v.a)(Object(v.a)({},t),{},{editMode:!1})}))}))}(t,d,a)},className:"bg-white rounded-md",children:Object(m.jsx)(F,{})}),Object(m.jsx)("div",{className:"text-red-500 ",onClick:function(){return function(e){return p.apply(this,arguments)}(t.email)},children:Object(m.jsx)(U,{})})]}),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"my-2 space-y-2",children:[Object(m.jsx)("div",{children:t.editMode?Object(m.jsxs)("div",{className:"flex items-start",children:[Object(m.jsx)("span",{className:"whitespace-nowrap",children:" First Name:\xa0"}),Object(m.jsx)("input",{ref:j,style:{width:(u.firstName.length||t.firstName.length)+2+"ch"},autoComplete:"off",className:"editable",value:u.firstName,name:"firstName",onChange:function(e){h(e,"firstName")}})]}):Object(m.jsxs)("div",{className:"flex max-w-full place-items-start",children:[Object(m.jsx)("span",{className:"whitespace-nowrap",children:" First Name:\xa0"}),Object(m.jsx)("div",{className:"px-2 text-lg break-all",children:t.firstName})]})}),Object(m.jsx)("div",{children:t.editMode?Object(m.jsxs)("div",{className:"flex items-center",children:[Object(m.jsx)("span",{className:"whitespace-nowrap",children:" Last Name:\xa0"}),Object(m.jsx)("input",{autoComplete:"off",className:"editable",style:{width:(u.lastName.length||t.lastName.length)+2+"ch"},value:u.lastName,name:"lastName",onChange:function(e){return h(e,"lastName")}})]}):Object(m.jsxs)("div",{className:"flex items-center",children:[Object(m.jsx)("span",{className:"whitespace-nowrap",children:" Last Name:\xa0"}),Object(m.jsx)("div",{className:"px-2 text-lg break-all",children:t.lastName})]})})]}),Object(m.jsxs)("div",{className:"break-words",children:["Email:\xa0",Object(m.jsx)("span",{className:"text-blue-500 underline break-all ",children:t.email})]}),Object(m.jsxs)("div",{className:"my-2",children:["Phone number: ",Object(m.jsx)("div",{children:t.phoneNumber})," "]})]})]}),Object(m.jsx)("img",{className:"object-cover h-40 ml-3 rounded-md w-28",src:t.imageURL||"no_avatar.jpg",alt:""})]})}function P(e){var t=e.user,a=Object(n.useState)([]),c=Object(s.a)(a,2),r=c[0],i=c[1];return Object(n.useEffect)((function(){if(null===t||void 0===t?void 0:t.email){var e=Object(g.a)(C,"contacts/users",null===t||void 0===t?void 0:t.email);Object(g.e)(e,(function(e){e.docChanges().forEach((function(e){"added"===e.type&&i((function(t){return[].concat(Object(B.a)(t),[e.doc.data()])})),"removed"===e.type&&i((function(t){return t.filter((function(t){return(null===t||void 0===t?void 0:t.email)!==e.doc.data().email}))}))}))}))}}),[null===t||void 0===t?void 0:t.email]),Object(m.jsxs)("div",{className:"-mt-12",children:[Object(m.jsx)("h1",{className:"my-3 text-xl font-bold text-center text-blue-500",children:"Contacts"}),Object(m.jsx)("div",{style:{gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))"},className:"grid max-w-screen-lg mx-auto",children:Object(m.jsx)(w.a,{children:null===r||void 0===r?void 0:r.map((function(e){return Object(m.jsx)(j.a.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.1},layout:!0,children:Object(m.jsx)(q,{user:t,contact:e,setContacts:i})},e.email)}))})})]})}function z(e){var t=e.user;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{user:t}),Object(m.jsx)(j.a.div,{initial:{translateY:-30,opacity:0,height:0},animate:{translateY:0,opacity:1,height:"auto"},className:"overflow-hidden",children:Object(m.jsxs)("div",{className:"mx-4",children:[Object(m.jsx)(R,{user:t}),Object(m.jsx)(P,{user:t})]})})]})}var H=a(46);var W=function(){var e=Object(n.useState)(),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){Object(H.c)(Object(H.b)(),(function(e){c(e)}))}),[]),Object(m.jsx)(d.a,{basename:"/react-contacts",children:Object(m.jsxs)(O.d,{children:[Object(m.jsx)(O.b,{path:"/login",children:a?Object(m.jsx)(O.a,{to:"/"}):Object(m.jsx)(x,{})}),Object(m.jsx)(O.b,{path:"/signup",children:a?Object(m.jsx)(O.a,{to:"/"}):Object(m.jsx)(h,{})}),Object(m.jsx)(O.b,{exact:!0,path:"/",children:a?Object(m.jsx)(z,{user:a}):Object(m.jsx)(O.a,{to:"/login"})})]})})};r.a.render(Object(m.jsx)(W,{}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.6170e630.chunk.js.map